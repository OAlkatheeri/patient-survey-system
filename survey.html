<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Satisfaction Survey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fffe 0%, #e8f4f8 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a8a 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .survey-content {
            padding: 40px;
        }

        .question-group {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8fafc;
            border-radius: 16px;
            border-left: 5px solid #2c5aa0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }

        .section-icon {
            font-size: 24px;
            margin-right: 12px;
            color: #2c5aa0;
        }

        .question {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
            line-height: 1.4;
        }

        .section-description {
            font-size: 14px;
            color: #64748b;
            margin-top: 8px;
            line-height: 1.5;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: #1e293b;
            font-size: 14px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }

        .rating-section {
            margin-bottom: 32px;
            padding: 24px;
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .rating-title {
            font-weight: 600;
            margin-bottom: 16px;
            color: #1e293b;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .rating-title-icon {
            font-size: 18px;
            margin-right: 8px;
            color: #2c5aa0;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #2c5aa0;
            background: #f8fafc;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .checkbox-item.exclusive {
            border-color: #dc2626;
            background: #fef2f2;
        }

        .checkbox-item.exclusive:hover {
            border-color: #dc2626;
            background: #fef2f2;
        }

        .contact-preferences-container {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            border: 2px solid #0ea5e9;
            box-shadow: 0 8px 32px rgba(14, 165, 233, 0.1);
        }

        .contact-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .contact-title {
            font-size: 24px;
            font-weight: 700;
            color: #0c4a6e;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .contact-subtitle {
            font-size: 16px;
            color: #0369a1;
            margin-bottom: 24px;
        }

        .contact-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .contact-option {
            position: relative;
            background: white;
            border-radius: 16px;
            padding: 24px;
            border: 3px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .contact-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(14, 165, 233, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .contact-option:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
            border-color: #0ea5e9;
        }

        .contact-option:hover::before {
            opacity: 1;
        }

        .contact-option.selected {
            border-color: #0ea5e9;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(14, 165, 233, 0.2);
        }

        .contact-option.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
            border-color: #e5e7eb;
            background: #f9fafb;
            box-shadow: none !important;
        }

        .contact-option.disabled:hover {
            transform: none;
            border-color: #e5e7eb;
        }

        .contact-option.disabled .contact-icon {
            filter: grayscale(100%);
        }

        .contact-checkbox {
            display: none;
        }

        .contact-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .contact-icon {
            font-size: 48px;
            margin-bottom: 16px;
            display: block;
            transition: transform 0.3s ease;
        }

        .contact-option:hover .contact-icon {
            transform: scale(1.1);
        }

        .contact-option.selected .contact-icon {
            transform: scale(1.15);
            filter: drop-shadow(0 4px 8px rgba(14, 165, 233, 0.3));
        }

        .contact-label {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }

        .contact-option.selected .contact-label {
            color: #0c4a6e;
        }

        .contact-description {
            font-size: 14px;
            color: #64748b;
            line-height: 1.5;
            transition: color 0.3s ease;
        }

        .contact-option.selected .contact-description {
            color: #0369a1;
        }

        .contact-checkmark {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #10b981;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .contact-option.selected .contact-checkmark {
            opacity: 1;
            transform: scale(1);
        }

        .contact-exclusive {
            border-color: #dc2626;
        }

        .contact-exclusive:hover {
            border-color: #dc2626;
        }

        .contact-exclusive.selected {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-color: #dc2626;
            box-shadow: 0 8px 16px rgba(220, 38, 38, 0.2);
        }

        .contact-exclusive .contact-checkmark {
            background: #dc2626;
        }

        .contact-exclusive.selected .contact-label {
            color: #7f1d1d;
        }

        .contact-exclusive.selected .contact-description {
            color: #991b1b;
        }

        .selected-summary {
            margin-top: 24px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border-left: 4px solid #10b981;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .selected-summary.show {
            opacity: 1;
            transform: translateY(0);
        }

        .summary-title {
            font-weight: 600;
            color: #065f46;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .summary-text {
            color: #047857;
            font-size: 14px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .contact-options {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .contact-option {
                padding: 20px;
            }
            
            .contact-icon {
                font-size: 36px;
            }
        }

        .privacy-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 16px;
            padding: 24px;
            margin-top: 32px;
        }

        .privacy-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .privacy-icon {
            font-size: 28px;
            margin-right: 12px;
            color: #0ea5e9;
        }

        .privacy-title {
            font-size: 20px;
            font-weight: 600;
            color: #0c4a6e;
        }

        .privacy-content {
            font-size: 14px;
            color: #475569;
            line-height: 1.6;
        }

        .privacy-list {
            margin: 16px 0;
            padding-left: 20px;
        }

        .privacy-list li {
            margin-bottom: 8px;
        }

        .consent-box {
            background: white;
            padding: 16px;
            border-radius: 10px;
            border: 2px solid #0ea5e9;
            margin: 20px 0;
        }

        .consent-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            cursor: pointer;
        }

        .consent-item input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 2px;
            transform: scale(1.2);
        }

        .data-notice {
            font-size: 12px;
            color: #64748b;
            background: white;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid #0ea5e9;
            margin-top: 16px;
        }

        .issue-conditional {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #fef2f2;
            border-radius: 12px;
            border-left: 4px solid #dc2626;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .radio-group {
            display: flex;
            gap: 24px;
            margin: 16px 0;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            border-color: #2c5aa0;
            background: #f8fafc;
        }

        .radio-item input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }

        .comment-section {
            margin-top: 40px;
            padding: 32px;
            background: linear-gradient(135deg, #f1f5f9 0%, #f8fafc 100%);
            border-radius: 16px;
            border-left: 5px solid #10b981;
        }

        .comment-section label {
            display: block;
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .comment-section p {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .comment-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
            background: white;
        }

        .comment-section textarea:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 12px;
            }
            
            .question-group {
                padding: 20px;
                margin-bottom: 24px;
            }
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 10px;
            transition: all 0.3s ease;
            min-width: 70px;
        }

        .rating-option:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .rating-option input[type="radio"] {
            display: none;
        }

        .rating-option input[type="radio"]:checked + .rating-content {
            background: #2c5aa0;
            color: white;
            transform: scale(1.1);
        }

        .rating-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .emoji {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .rating-number {
            font-weight: 600;
            font-size: 14px;
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #64748b;
            margin-top: 10px;
        }

        .comment-section {
            margin-top: 40px;
            padding: 25px;
            background: #f1f5f9;
            border-radius: 12px;
        }

        .comment-section label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .comment-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .comment-section textarea:focus {
            outline: none;
            border-color: #2c5aa0;
        }

        .submit-btn {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a8a 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(44, 90, 160, 0.3);
        }

        .thank-you {
            display: none;
            text-align: center;
            padding: 60px 40px;
            background: #f0f9ff;
            border-radius: 12px;
            margin: 20px;
        }

        .thank-you.show {
            display: block;
        }

        .thank-you h2 {
            color: #2c5aa0;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .thank-you p {
            color: #475569;
            font-size: 16px;
            line-height: 1.6;
        }

        .check-icon {
            font-size: 48px;
            color: #10b981;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .rating-scale {
                gap: 8px;
            }
            
            .rating-option {
                min-width: 55px;
                padding: 8px;
            }
            
            .emoji {
                font-size: 20px;
            }
            
            .rating-number {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>How Was Your Visit Today?</h1>
            <p>Your feedback helps us provide the best possible care. Please take a moment to share your experience with us.</p>
        </div>

        <form id="surveyForm" class="survey-content">
            <!-- Patient Information Section -->
            <div class="question-group">
                <div class="section-header">
                    <span class="section-icon">👤</span>
                    <div>
                        <div class="question">Visit Information</div>
                        <div class="section-description">Please provide details about your visit today</div>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="patientName">Full Name *</label>
                        <input type="text" id="patientName" name="patient_name" required class="form-input" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="patientEmail">Email Address *</label>
                        <input type="email" id="patientEmail" name="patient_email" required class="form-input" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="patientPhone">Phone Number</label>
                        <input type="tel" id="patientPhone" name="patient_phone" class="form-input" placeholder="Enter your phone number">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="visitDate">Visit Date *</label>
                        <input type="date" id="visitDate" name="visit_date" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="visitTime">Visit Time *</label>
                        <select id="visitTime" name="visit_time" required class="form-select">
                            <option value="">Select time</option>
                            <option value="8:00 AM - 9:00 AM">8:00 AM - 9:00 AM</option>
                            <option value="9:00 AM - 10:00 AM">9:00 AM - 10:00 AM</option>
                            <option value="10:00 AM - 11:00 AM">10:00 AM - 11:00 AM</option>
                            <option value="11:00 AM - 12:00 PM">11:00 AM - 12:00 PM</option>
                            <option value="12:00 PM - 1:00 PM">12:00 PM - 1:00 PM</option>
                            <option value="1:00 PM - 2:00 PM">1:00 PM - 2:00 PM</option>
                            <option value="2:00 PM - 3:00 PM">2:00 PM - 3:00 PM</option>
                            <option value="3:00 PM - 4:00 PM">3:00 PM - 4:00 PM</option>
                            <option value="4:00 PM - 5:00 PM">4:00 PM - 5:00 PM</option>
                            <option value="5:00 PM - 6:00 PM">5:00 PM - 6:00 PM</option>
                            <option value="After 6:00 PM">After 6:00 PM</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="department">Department/Service Visited *</label>
                        <select id="department" name="department_visited" required class="form-select">
                            <option value="">Select department</option>
                            <option value="Reception/Front Desk">Reception/Front Desk</option>
                            <option value="General Practice">General Practice</option>
                            <option value="Specialist Consultation">Specialist Consultation</option>
                            <option value="Nursing Services">Nursing Services</option>
                            <option value="Laboratory">Laboratory</option>
                            <option value="Radiology/Imaging">Radiology/Imaging</option>
                            <option value="Pharmacy">Pharmacy</option>
                            <option value="Physical Therapy">Physical Therapy</option>
                            <option value="Emergency/Urgent Care">Emergency/Urgent Care</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Wait Times Section -->
            <div class="question-group">
                <div class="section-header">
                    <span class="section-icon">⏱️</span>
                    <div>
                        <div class="question">Wait Times Experience</div>
                        <div class="section-description">Help us understand your waiting experience today</div>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="waitTime">How long did you wait for your appointment? *</label>
                        <select id="waitTime" name="wait_time_actual" required class="form-select">
                            <option value="">Select wait time</option>
                            <option value="0-5 minutes">0-5 minutes</option>
                            <option value="6-10 minutes">6-10 minutes</option>
                            <option value="11-15 minutes">11-15 minutes</option>
                            <option value="16-30 minutes">16-30 minutes</option>
                            <option value="31-45 minutes">31-45 minutes</option>
                            <option value="46-60 minutes">46-60 minutes</option>
                            <option value="More than 1 hour">More than 1 hour</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="scheduledTime">Was your appointment on time?</label>
                        <select id="scheduledTime" name="appointment_timeliness" class="form-select">
                            <option value="">Select option</option>
                            <option value="Yes, exactly on time">Yes, exactly on time</option>
                            <option value="Slightly delayed (under 15 min)">Slightly delayed (under 15 min)</option>
                            <option value="Moderately delayed (15-30 min)">Moderately delayed (15-30 min)</option>
                            <option value="Significantly delayed (over 30 min)">Significantly delayed (over 30 min)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Service-Specific Feedback -->
            <div class="question-group">
                <div class="section-header">
                    <span class="section-icon">🏥</span>
                    <div>
                        <div class="question">Service-Specific Feedback</div>
                        <div class="section-description">Rate each service you experienced today (leave blank if not applicable)</div>
                    </div>
                </div>
                
                <!-- Reception/Front Desk -->
                <div class="rating-section">
                    <div class="rating-title">
                        <span class="rating-title-icon">🏢</span>
                        Reception/Front Desk Service
                    </div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">😞</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">😕</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">😐</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">🙂</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">😄</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Service</span>
                        <span>Excellent Service</span>
                    </div>
                </div>

                <!-- Doctor Consultation -->
                <div class="rating-section">
                    <div class="rating-title">
                        <span class="rating-title-icon">👨‍⚕️</span>
                        Doctor/Healthcare Provider Consultation
                    </div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">😞</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">😕</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">😐</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">🙂</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">😄</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Consultation</span>
                        <span>Excellent Consultation</span>
                    </div>
                </div>

                <!-- Nursing Services -->
                <div class="rating-section">
                    <div class="rating-title">
                        <span class="rating-title-icon">👩‍⚕️</span>
                        Nursing Services
                    </div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">😞</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">😕</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">😐</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">🙂</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">😄</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Care</span>
                        <span>Excellent Care</span>
                    </div>
                </div>
            </div>
            <div class="question-group">
                <div class="question">Overall, how satisfied are you with your visit today?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">😞</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="2">
                        <div class="rating-content">
                            <div class="emoji">😕</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="3">
                        <div class="rating-content">
                            <div class="emoji">😐</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="4">
                        <div class="rating-content">
                            <div class="emoji">🙂</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="5">
                        <div class="rating-content">
                            <div class="emoji">😄</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Very Dissatisfied</span>
                    <span>Very Satisfied</span>
                </div>
            </div>

            <!-- Staff Professionalism -->
            <div class="question-group">
                <div class="question">How would you rate the professionalism and courtesy of our staff?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">😞</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="2">
                        <div class="rating-content">
                            <div class="emoji">😕</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="3">
                        <div class="rating-content">
                            <div class="emoji">😐</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="4">
                        <div class="rating-content">
                            <div class="emoji">🙂</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="5">
                        <div class="rating-content">
                            <div class="emoji">😄</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Poor</span>
                    <span>Excellent</span>
                </div>
            </div>

            <!-- Waiting Time -->
            <div class="question-group">
                <div class="question">How satisfied are you with your waiting time today?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">😞</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="2">
                        <div class="rating-content">
                            <div class="emoji">😕</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="3">
                        <div class="rating-content">
                            <div class="emoji">😐</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="4">
                        <div class="rating-content">
                            <div class="emoji">🙂</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="5">
                        <div class="rating-content">
                            <div class="emoji">😄</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Too Long</span>
                    <span>Just Right</span>
                </div>
            </div>

            <!-- Feeling Heard -->
            <div class="question-group">
                <div class="question">Did you feel heard and understood during your appointment?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">😞</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="2">
                        <div class="rating-content">
                            <div class="emoji">😕</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="3">
                        <div class="rating-content">
                            <div class="emoji">😐</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="4">
                        <div class="rating-content">
                            <div class="emoji">🙂</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="5">
                        <div class="rating-content">
                            <div class="emoji">😄</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Not at All</span>
                    <span>Completely</span>
                </div>
            </div>

            <!-- Additional Comments -->
            <div class="comment-section">
                <label for="comments">💬 Additional Comments</label>
                <p>Please share any additional thoughts, suggestions, or feedback about your visit today:</p>
                <textarea id="comments" name="comments" placeholder="Your feedback helps us improve our services. Please share any additional thoughts about your experience..."></textarea>
            </div>

            <!-- Contact Preferences Section -->
            <div class="contact-preferences-container">
                <div class="contact-header">
                    <div class="contact-title">
                        <span>📞</span>
                        Contact Preferences
                    </div>
                    <div class="contact-subtitle">
                        How would you like us to reach you for follow-up?
                    </div>
                </div>

                <div class="contact-options">
                    <label class="contact-option" for="contact-email">
                        <input type="checkbox" id="contact-email" name="contact_preference" value="email" class="contact-checkbox">
                        <div class="contact-content">
                            <span class="contact-icon">📧</span>
                            <div class="contact-label">Email Contact</div>
                            <div class="contact-description">We'll send follow-up information to your email address</div>
                        </div>
                        <div class="contact-checkmark">✓</div>
                    </label>

                    <label class="contact-option" for="contact-phone">
                        <input type="checkbox" id="contact-phone" name="contact_preference" value="phone" class="contact-checkbox">
                        <div class="contact-content">
                            <span class="contact-icon">📱</span>
                            <div class="contact-label">Phone Contact</div>
                            <div class="contact-description">We'll call you for any necessary follow-up</div>
                        </div>
                        <div class="contact-checkmark">✓</div>
                    </label>

                    <label class="contact-option contact-exclusive" for="contact-none">
                        <input type="checkbox" id="contact-none" name="contact_preference" value="no_contact" class="contact-checkbox">
                        <div class="contact-content">
                            <span class="contact-icon">🚫</span>
                            <div class="contact-label">No Contact</div>
                            <div class="contact-description">Please do not contact me regarding this feedback</div>
                        </div>
                        <div class="contact-checkmark">✓</div>
                    </label>
                </div>

                <div class="selected-summary" id="contactSummary">
                    <div class="summary-title">Your Contact Preference:</div>
                    <div class="summary-text" id="summaryText">Please select how you'd like to be contacted</div>
                </div>
            </div>

            <!-- Privacy and Confidentiality -->
            <div class="privacy-section">
                <div class="privacy-header">
                    <span class="privacy-icon">🔒</span>
                    <div class="privacy-title">Privacy & Confidentiality</div>
                </div>
                <div class="privacy-content">
                    <p style="margin-bottom: 12px;"><strong>Your Privacy Matters:</strong> We are committed to protecting your personal information and ensuring compliance with healthcare privacy regulations.</p>
                    <ul class="privacy-list">
                        <li>Your feedback will be used solely for quality improvement purposes</li>
                        <li>Personal identifiers will be kept secure and confidential</li>
                        <li>Your responses may be shared with relevant staff for service improvement</li>
                        <li>You have the right to request deletion of your feedback data</li>
                    </ul>
                </div>
                
                <div class="consent-box">
                    <div style="margin-bottom: 16px;">
                        <label class="form-label">Consent for feedback use:</label>
                        <div class="consent-item">
                            <input type="checkbox" name="consent_feedback_use" value="yes" required>
                            <span style="line-height: 1.4;">I consent to my feedback being used for quality improvement purposes and understand that my personal information will be kept confidential.</span>
                        </div>
                    </div>
                </div>

                <div class="data-notice">
                    <strong>Data Protection Notice:</strong> This feedback system complies with healthcare privacy standards. For questions about how your data is used or to request data deletion, please contact our Privacy Officer at privacy@medicalpractice.com
                </div>
            </div>

            <button type="submit" class="submit-btn">Submit Feedback</button>
        </form>

        <div id="thankYou" class="thank-you">
            <div class="check-icon">✅</div>
            <h2>Thank You for Your Feedback!</h2>
            <p>We truly appreciate you taking the time to share your experience with us. Your feedback helps us continue to improve our care and service. We look forward to serving you again in the future.</p>
        </div>
    </div>

    <script>
        // Survey data storage (using localStorage for cross-tab functionality)
        function saveSurveyResponse(responseData) {
            // Get existing responses
            let responses = JSON.parse(localStorage.getItem('surveyResponses') || '[]');
            
            // Add new response with timestamp and ID
            const newResponse = {
                id: 'SR' + Date.now(),
                timestamp: new Date().toISOString(),
                submittedAt: new Date().toLocaleString(),
                ...responseData
            };
            
            responses.push(newResponse);
            
            // Save back to storage
            localStorage.setItem('surveyResponses', JSON.stringify(responses));
            
            // Simulate email notification
            sendEmailNotification(newResponse);
            
            return newResponse;
        }

        function sendEmailNotification(response) {
            // Simulate email notification (in production, this would call your email service)
            const emailData = {
                to: 'admin@medicalpractice.com',
                subject: `New Patient Feedback - ${response.patient_name}`,
                body: `
New patient survey response received:

PATIENT INFORMATION:
• Name: ${response.patient_name}
• Email: ${response.patient_email}
• Phone: ${response.patient_phone || 'Not provided'}
• Visit Date: ${response.visit_date}
• Visit Time: ${response.visit_time}
• Department: ${response.department_visited}

WAIT TIMES:
• Actual wait time: ${response.wait_time_actual || 'Not specified'}
• Appointment timeliness: ${response.appointment_timeliness || 'Not specified'}

OVERALL SATISFACTION RATINGS:
• Overall Satisfaction: ${response.overall_satisfaction}/5
• Staff Professionalism: ${response.staff_professionalism}/5
• Waiting Time: ${response.waiting_time}/5
• Feeling Heard: ${response.feeling_heard}/5

SERVICE-SPECIFIC RATINGS:
• Reception/Front Desk: ${response.reception_rating ? response.reception_rating + '/5' : 'Not rated'}
• Doctor Consultation: ${response.doctor_rating ? response.doctor_rating + '/5' : 'Not rated'}  
• Nursing Services: ${response.nursing_rating ? response.nursing_rating + '/5' : 'Not rated'}

STAFF INTERACTION:
• Communication Clarity: ${response.communication_clarity ? response.communication_clarity + '/5' : 'Not rated'}
• Staff Courtesy: ${response.staff_courtesy ? response.staff_courtesy + '/5' : 'Not rated'}

ISSUES REPORTED:
• Had Issues: ${response.had_issues || 'Not specified'}
${response.issue_description ? '• Issue Details: ' + response.issue_description : ''}

FOLLOW-UP NEEDS:
${response.followup_needs_array && response.followup_needs_array.length > 0 ? '• Requested: ' + response.followup_needs_array.join(', ') : '• No specific follow-up requested'}
${response.followup_details ? '• Follow-up Details: ' + response.followup_details : ''}

GENERAL COMMENTS:
${response.comments || 'No additional comments provided'}

CONTACT PREFERENCES:
${response.contact_preference_array && response.contact_preference_array.length > 0 ? '• Preferred contact: ' + response.contact_preference_array.join(', ') : '• No contact preferences specified'}

SUBMISSION DETAILS:
• Submitted: ${response.submittedAt}
• Response ID: ${response.id}

${response.overall_satisfaction <= 2 || response.had_issues === 'yes' ? '⚠️ PRIORITY: Low satisfaction or issues reported - Follow up within 24 hours!' : ''}
                `
            };
            
            console.log('Email notification sent:', emailData);
            
            // Store email notifications for admin dashboard
            let emailLog = JSON.parse(localStorage.getItem('emailNotifications') || '[]');
            emailLog.push({
                ...emailData,
                sentAt: new Date().toLocaleString(),
                responseId: response.id
            });
            localStorage.setItem('emailNotifications', JSON.stringify(emailLog));
        }

        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data
            const formData = new FormData(this);
            const responseData = Object.fromEntries(formData);
            
            // Handle checkbox arrays for follow-up needs and contact preferences
            const followupNeeds = formData.getAll('followup_needs');
            const contactPreferences = formData.getAll('contact_preference');
            
            responseData.followup_needs_array = followupNeeds;
            responseData.contact_preference_array = contactPreferences;
            
            // Save the response
            const savedResponse = saveSurveyResponse(responseData);
            
            // Hide the form
            this.style.display = 'none';
            
            // Show thank you message
            document.getElementById('thankYou').classList.add('show');
            
            // Scroll to top to show thank you message
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            console.log('Survey response saved:', savedResponse);
        });

        // Show/hide issue details based on selection with smooth animation
        document.querySelectorAll('input[name="had_issues"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const issueDetails = document.getElementById('issueDetails');
                if (this.value === 'yes') {
                    issueDetails.style.display = 'block';
                    document.getElementById('issueDescription').required = true;
                    // Scroll to the issue section smoothly
                    setTimeout(() => {
                        issueDetails.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                } else {
                    issueDetails.style.display = 'none';
                    document.getElementById('issueDescription').required = false;
                    document.getElementById('issueDescription').value = '';
                }
            });
        });

        // Handle "no follow-up" checkbox to uncheck others
        document.querySelector('input[name="followup_needs"][value="no_followup"]').addEventListener('change', function() {
            if (this.checked) {
                document.querySelectorAll('input[name="followup_needs"]:not([value="no_followup"])').forEach(cb => {
                    cb.checked = false;
                });
            }
        });

        // Handle other follow-up checkboxes to uncheck "no follow-up"
        document.querySelectorAll('input[name="followup_needs"]:not([value="no_followup"])').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    document.querySelector('input[name="followup_needs"][value="no_followup"]').checked = false;
                }
            });
        });

        // Creative dynamic contact preferences handler
        function updateContactPreferences() {
            const emailCheckbox = document.getElementById('contact-email');
            const phoneCheckbox = document.getElementById('contact-phone');
            const noContactCheckbox = document.getElementById('contact-none');
            const summary = document.getElementById('contactSummary');
            const summaryText = document.getElementById('summaryText');
            
            if (!emailCheckbox || !phoneCheckbox || !noContactCheckbox) return;

            const emailOption = emailCheckbox.closest('.contact-option');
            const phoneOption = phoneCheckbox.closest('.contact-option');
            const noContactOption = noContactCheckbox.closest('.contact-option');

            // Check current state
            const emailSelected = emailCheckbox.checked;
            const phoneSelected = phoneCheckbox.checked;
            const noContactSelected = noContactCheckbox.checked;

            // Reset all states first
            [emailOption, phoneOption, noContactOption].forEach(option => {
                option.classList.remove('selected', 'disabled');
            });

            let summaryMessage = "Please select how you'd like to be contacted";
            let showSummary = false;

            if (noContactSelected) {
                // No contact selected - disable others
                emailCheckbox.checked = false;
                phoneCheckbox.checked = false;
                
                noContactOption.classList.add('selected');
                emailOption.classList.add('disabled');
                phoneOption.classList.add('disabled');
                
                summaryMessage = "✅ You have chosen not to be contacted regarding this feedback";
                showSummary = true;
                
            } else if (emailSelected && phoneSelected) {
                // Both email and phone selected
                noContactCheckbox.checked = false;
                
                emailOption.classList.add('selected');
                phoneOption.classList.add('selected');
                noContactOption.classList.add('disabled');
                
                summaryMessage = "✅ We'll contact you via both email and phone for follow-up";
                showSummary = true;
                
            } else if (emailSelected) {
                // Only email selected
                noContactCheckbox.checked = false;
                
                emailOption.classList.add('selected');
                noContactOption.classList.add('disabled');
                
                summaryMessage = "✅ We'll send follow-up information to your email address";
                showSummary = true;
                
            } else if (phoneSelected) {
                // Only phone selected
                noContactCheckbox.checked = false;
                
                phoneOption.classList.add('selected');
                noContactOption.classList.add('disabled');
                
                summaryMessage = "✅ We'll call you for any necessary follow-up";
                showSummary = true;
                
            }

            // Update summary
            summaryText.textContent = summaryMessage;
            if (showSummary) {
                summary.classList.add('show');
            } else {
                summary.classList.remove('show');
            }

            // Add click prevention for disabled options
            const disabledOptions = document.querySelectorAll('.contact-option.disabled');
            disabledOptions.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            const enabledOptions = document.querySelectorAll('.contact-option:not(.disabled)');
            enabledOptions.forEach(option => {
                option.style.pointerEvents = 'auto';
            });
        }

        // Initialize contact preferences when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Add click listeners to the contact option labels
            const contactOptions = document.querySelectorAll('.contact-option');
            
            contactOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    // Prevent default if option is disabled
                    if (this.classList.contains('disabled')) {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                    
                    const checkbox = this.querySelector('.contact-checkbox');
                    if (checkbox && e.target !== checkbox) {
                        checkbox.checked = !checkbox.checked;
                    }
                    
                    // Small delay to ensure checkbox state is updated
                    setTimeout(updateContactPreferences, 10);
                });
            });

            // Add change listeners to checkboxes
            const contactCheckboxes = document.querySelectorAll('.contact-checkbox');
            contactCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    setTimeout(updateContactPreferences, 10);
                });
            });
            
            // Set initial state
            updateContactPreferences();
        });

        // Backup initialization with timeout
        setTimeout(() => {
            const contactCheckboxes = document.querySelectorAll('.contact-checkbox');
            if (contactCheckboxes.length > 0) {
                contactCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', updateContactPreferences);
                });
                updateContactPreferences();
            }
        }, 200);

        // Add visual feedback when hovering over rating options
        document.querySelectorAll('.rating-option').forEach(option => {
            option.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            option.addEventListener('mouseleave', function() {
                if (!this.querySelector('input').checked) {
                    this.style.transform = 'translateY(0)';
                }
            });
        });
    </script>
</body>
</html>
