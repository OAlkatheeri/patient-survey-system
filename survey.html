<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Satisfaction Survey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fffe 0%, #e8f4f8 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a8a 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .survey-content {
            padding: 40px;
        }

        .question-group {
            margin-bottom: 35px;
            padding: 25px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #2c5aa0;
        }

        .question {
            font-size: 18px;
            font-weight: 500;
            color: #1e293b;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 10px;
            transition: all 0.3s ease;
            min-width: 70px;
        }

        .rating-option:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .rating-option input[type="radio"] {
            display: none;
        }

        .rating-option input[type="radio"]:checked + .rating-content {
            background: #2c5aa0;
            color: white;
            transform: scale(1.1);
        }

        .rating-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .emoji {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .rating-number {
            font-weight: 600;
            font-size: 14px;
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #64748b;
            margin-top: 10px;
        }

        .comment-section {
            margin-top: 40px;
            padding: 25px;
            background: #f1f5f9;
            border-radius: 12px;
        }

        .comment-section label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .comment-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .comment-section textarea:focus {
            outline: none;
            border-color: #2c5aa0;
        }

        .submit-btn {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a8a 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(44, 90, 160, 0.3);
        }

        .thank-you {
            display: none;
            text-align: center;
            padding: 60px 40px;
            background: #f0f9ff;
            border-radius: 12px;
            margin: 20px;
        }

        .thank-you.show {
            display: block;
        }

        .thank-you h2 {
            color: #2c5aa0;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .thank-you p {
            color: #475569;
            font-size: 16px;
            line-height: 1.6;
        }

        .check-icon {
            font-size: 48px;
            color: #10b981;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .rating-scale {
                gap: 8px;
            }
            
            .rating-option {
                min-width: 55px;
                padding: 8px;
            }
            
            .emoji {
                font-size: 20px;
            }
            
            .rating-number {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>How Was Your Visit Today?</h1>
            <p>Your feedback helps us provide the best possible care. Please take a moment to share your experience with us.</p>
        </div>

        <form id="surveyForm" class="survey-content">
            <!-- Patient Information Section -->
            <div class="question-group">
                <div class="question">Visit Information</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div>
                        <label for="patientName" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Full Name *</label>
                        <input type="text" id="patientName" name="patient_name" required 
                               style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;" 
                               placeholder="Enter your full name">
                    </div>
                    <div>
                        <label for="patientEmail" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Email Address *</label>
                        <input type="email" id="patientEmail" name="patient_email" required 
                               style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;" 
                               placeholder="Enter your email">
                    </div>
                    <div>
                        <label for="patientPhone" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Phone Number</label>
                        <input type="tel" id="patientPhone" name="patient_phone" 
                               style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;" 
                               placeholder="Enter your phone number">
                    </div>
                    <div>
                        <label for="visitDate" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Visit Date *</label>
                        <input type="date" id="visitDate" name="visit_date" required 
                               style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                    </div>
                    <div>
                        <label for="visitTime" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Approximate Visit Time *</label>
                        <select id="visitTime" name="visit_time" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">Select time</option>
                            <option value="8:00 AM - 9:00 AM">8:00 AM - 9:00 AM</option>
                            <option value="9:00 AM - 10:00 AM">9:00 AM - 10:00 AM</option>
                            <option value="10:00 AM - 11:00 AM">10:00 AM - 11:00 AM</option>
                            <option value="11:00 AM - 12:00 PM">11:00 AM - 12:00 PM</option>
                            <option value="12:00 PM - 1:00 PM">12:00 PM - 1:00 PM</option>
                            <option value="1:00 PM - 2:00 PM">1:00 PM - 2:00 PM</option>
                            <option value="2:00 PM - 3:00 PM">2:00 PM - 3:00 PM</option>
                            <option value="3:00 PM - 4:00 PM">3:00 PM - 4:00 PM</option>
                            <option value="4:00 PM - 5:00 PM">4:00 PM - 5:00 PM</option>
                            <option value="5:00 PM - 6:00 PM">5:00 PM - 6:00 PM</option>
                            <option value="After 6:00 PM">After 6:00 PM</option>
                        </select>
                    </div>
                    <div>
                        <label for="department" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Department/Service Visited *</label>
                        <select id="department" name="department_visited" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">Select department</option>
                            <option value="Reception/Front Desk">Reception/Front Desk</option>
                            <option value="General Practice">General Practice</option>
                            <option value="Specialist Consultation">Specialist Consultation</option>
                            <option value="Nursing Services">Nursing Services</option>
                            <option value="Laboratory">Laboratory</option>
                            <option value="Radiology/Imaging">Radiology/Imaging</option>
                            <option value="Pharmacy">Pharmacy</option>
                            <option value="Physical Therapy">Physical Therapy</option>
                            <option value="Emergency/Urgent Care">Emergency/Urgent Care</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Wait Times Section -->
            <div class="question-group">
                <div class="question">Wait Times Experience</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div>
                        <label for="waitTime" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">How long did you wait for your appointment? *</label>
                        <select id="waitTime" name="wait_time_actual" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">Select wait time</option>
                            <option value="0-5 minutes">0-5 minutes</option>
                            <option value="6-10 minutes">6-10 minutes</option>
                            <option value="11-15 minutes">11-15 minutes</option>
                            <option value="16-30 minutes">16-30 minutes</option>
                            <option value="31-45 minutes">31-45 minutes</option>
                            <option value="46-60 minutes">46-60 minutes</option>
                            <option value="More than 1 hour">More than 1 hour</option>
                        </select>
                    </div>
                    <div>
                        <label for="scheduledTime" style="display: block; font-weight: 500; margin-bottom: 8px; color: #1e293b;">Was your appointment on time?</label>
                        <select id="scheduledTime" name="appointment_timeliness" 
                                style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">Select option</option>
                            <option value="Yes, exactly on time">Yes, exactly on time</option>
                            <option value="Slightly delayed (under 15 min)">Slightly delayed (under 15 min)</option>
                            <option value="Moderately delayed (15-30 min)">Moderately delayed (15-30 min)</option>
                            <option value="Significantly delayed (over 30 min)">Significantly delayed (over 30 min)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Service-Specific Feedback -->
            <div class="question-group">
                <div class="question">Service-Specific Feedback</div>
                <p style="font-size: 14px; color: #64748b; margin-bottom: 20px;">Please rate each service you experienced today (leave blank if not applicable)</p>
                
                <!-- Reception/Front Desk -->
                <div style="margin-bottom: 25px;">
                    <div style="font-weight: 500; margin-bottom: 15px; color: #1e293b;">Reception/Front Desk Service</div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">üòû</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">üòï</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">üòê</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">üôÇ</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="reception_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">üòÑ</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Service</span>
                        <span>Excellent Service</span>
                    </div>
                </div>

                <!-- Doctor Consultation -->
                <div style="margin-bottom: 25px;">
                    <div style="font-weight: 500; margin-bottom: 15px; color: #1e293b;">Doctor/Healthcare Provider Consultation</div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">üòû</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">üòï</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">üòê</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">üôÇ</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="doctor_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">üòÑ</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Consultation</span>
                        <span>Excellent Consultation</span>
                    </div>
                </div>

                <!-- Nursing Services -->
                <div style="margin-bottom: 25px;">
                    <div style="font-weight: 500; margin-bottom: 15px; color: #1e293b;">Nursing Services</div>
                    <div class="rating-scale">
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="1">
                            <div class="rating-content">
                                <div class="emoji">üòû</div>
                                <div class="rating-number">1</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="2">
                            <div class="rating-content">
                                <div class="emoji">üòï</div>
                                <div class="rating-number">2</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="3">
                            <div class="rating-content">
                                <div class="emoji">üòê</div>
                                <div class="rating-number">3</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="4">
                            <div class="rating-content">
                                <div class="emoji">üôÇ</div>
                                <div class="rating-number">4</div>
                            </div>
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="nursing_rating" value="5">
                            <div class="rating-content">
                                <div class="emoji">üòÑ</div>
                                <div class="rating-number">5</div>
                            </div>
                        </label>
                    </div>
                    <div class="rating-labels">
                        <span>Poor Care</span>
                        <span>Excellent Care</span>
                    </div>
                </div>
            </div>
            <div class="question-group">
                <div class="question">Overall, how satisfied are you with your visit today?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">üòû</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="2">
                        <div class="rating-content">
                            <div class="emoji">üòï</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="3">
                        <div class="rating-content">
                            <div class="emoji">üòê</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="4">
                        <div class="rating-content">
                            <div class="emoji">üôÇ</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="overall_satisfaction" value="5">
                        <div class="rating-content">
                            <div class="emoji">üòÑ</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Very Dissatisfied</span>
                    <span>Very Satisfied</span>
                </div>
            </div>

            <!-- Staff Professionalism -->
            <div class="question-group">
                <div class="question">How would you rate the professionalism and courtesy of our staff?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">üòû</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="2">
                        <div class="rating-content">
                            <div class="emoji">üòï</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="3">
                        <div class="rating-content">
                            <div class="emoji">üòê</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="4">
                        <div class="rating-content">
                            <div class="emoji">üôÇ</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="staff_professionalism" value="5">
                        <div class="rating-content">
                            <div class="emoji">üòÑ</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Poor</span>
                    <span>Excellent</span>
                </div>
            </div>

            <!-- Waiting Time -->
            <div class="question-group">
                <div class="question">How satisfied are you with your waiting time today?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">üòû</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="2">
                        <div class="rating-content">
                            <div class="emoji">üòï</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="3">
                        <div class="rating-content">
                            <div class="emoji">üòê</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="4">
                        <div class="rating-content">
                            <div class="emoji">üôÇ</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="waiting_time" value="5">
                        <div class="rating-content">
                            <div class="emoji">üòÑ</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Too Long</span>
                    <span>Just Right</span>
                </div>
            </div>

            <!-- Feeling Heard -->
            <div class="question-group">
                <div class="question">Did you feel heard and understood during your appointment?</div>
                <div class="rating-scale">
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="1" required>
                        <div class="rating-content">
                            <div class="emoji">üòû</div>
                            <div class="rating-number">1</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="2">
                        <div class="rating-content">
                            <div class="emoji">üòï</div>
                            <div class="rating-number">2</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="3">
                        <div class="rating-content">
                            <div class="emoji">üòê</div>
                            <div class="rating-number">3</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="4">
                        <div class="rating-content">
                            <div class="emoji">üôÇ</div>
                            <div class="rating-number">4</div>
                        </div>
                    </label>
                    <label class="rating-option">
                        <input type="radio" name="feeling_heard" value="5">
                        <div class="rating-content">
                            <div class="emoji">üòÑ</div>
                            <div class="rating-number">5</div>
                        </div>
                    </label>
                </div>
                <div class="rating-labels">
                    <span>Not at All</span>
                    <span>Completely</span>
                </div>
            </div>

            <!-- Optional Comments -->
            <div class="comment-section">
                <label for="comments">Additional Comments</label>
                <p style="font-size: 14px; color: #64748b; margin-bottom: 12px;">Please share any additional thoughts, suggestions, or feedback about your visit today:</p>
                <textarea id="comments" name="comments" placeholder="Your feedback helps us improve our services. Please share any additional thoughts about your experience..."></textarea>
            </div>

            <!-- Privacy and Confidentiality -->
            <div class="question-group" style="background: #f0f9ff; border-left-color: #0ea5e9;">
                <div class="question">Privacy & Confidentiality</div>
                <div style="font-size: 14px; color: #475569; line-height: 1.6; margin-bottom: 20px;">
                    <p style="margin-bottom: 12px;"><strong>Your Privacy Matters:</strong> We are committed to protecting your personal information and ensuring compliance with healthcare privacy regulations.</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li>Your feedback will be used solely for quality improvement purposes</li>
                        <li>Personal identifiers will be kept secure and confidential</li>
                        <li>Your responses may be shared with relevant staff for service improvement</li>
                        <li>You have the right to request deletion of your feedback data</li>
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 500; margin-bottom: 12px; color: #1e293b;">Consent for feedback use:</label>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <label style="display: flex; align-items: flex-start; cursor: pointer;">
                            <input type="checkbox" name="consent_feedback_use" value="yes" required style="margin-right: 12px; margin-top: 2px;">
                            <span style="line-height: 1.4;">I consent to my feedback being used for quality improvement purposes and understand that my personal information will be kept confidential.</span>
                        </label>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 500; margin-bottom: 12px; color: #1e293b;">Contact preferences for follow-up (optional):</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" name="contact_preference" value="email" style="margin-right: 8px;">
                            <span>Email me if follow-up is needed</span>
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" name="contact_preference" value="phone" style="margin-right: 8px;">
                            <span>Call me if follow-up is needed</span>
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" name="contact_preference" value="no_contact" style="margin-right: 8px;">
                            <span>Please do not contact me regarding this feedback</span>
                        </label>
                    </div>
                </div>

                <div style="font-size: 12px; color: #64748b; background: white; padding: 12px; border-radius: 6px;">
                    <strong>Data Protection Notice:</strong> This feedback system complies with healthcare privacy standards. For questions about how your data is used or to request data deletion, please contact our Privacy Officer at privacy@medicalpractice.com
                </div>
            </div>

            <button type="submit" class="submit-btn">Submit Feedback</button>
        </form>

        <div id="thankYou" class="thank-you">
            <div class="check-icon">‚úÖ</div>
            <h2>Thank You for Your Feedback!</h2>
            <p>We truly appreciate you taking the time to share your experience with us. Your feedback helps us continue to improve our care and service. We look forward to serving you again in the future.</p>
        </div>
    </div>

    <script>
        // Survey data storage (using localStorage for cross-tab functionality)
        function saveSurveyResponse(responseData) {
            // Get existing responses
            let responses = JSON.parse(localStorage.getItem('surveyResponses') || '[]');
            
            // Add new response with timestamp and ID
            const newResponse = {
                id: 'SR' + Date.now(),
                timestamp: new Date().toISOString(),
                submittedAt: new Date().toLocaleString(),
                ...responseData
            };
            
            responses.push(newResponse);
            
            // Save back to storage
            localStorage.setItem('surveyResponses', JSON.stringify(responses));
            
            // Simulate email notification
            sendEmailNotification(newResponse);
            
            return newResponse;
        }

        function sendEmailNotification(response) {
            // Simulate email notification (in production, this would call your email service)
            const emailData = {
                to: 'admin@medicalpractice.com',
                subject: `New Patient Feedback - ${response.patient_name}`,
                body: `
New patient survey response received:

PATIENT INFORMATION:
‚Ä¢ Name: ${response.patient_name}
‚Ä¢ Email: ${response.patient_email}
‚Ä¢ Phone: ${response.patient_phone || 'Not provided'}
‚Ä¢ Visit Date: ${response.visit_date}
‚Ä¢ Visit Time: ${response.visit_time}
‚Ä¢ Department: ${response.department_visited}

WAIT TIMES:
‚Ä¢ Actual wait time: ${response.wait_time_actual || 'Not specified'}
‚Ä¢ Appointment timeliness: ${response.appointment_timeliness || 'Not specified'}

OVERALL SATISFACTION RATINGS:
‚Ä¢ Overall Satisfaction: ${response.overall_satisfaction}/5
‚Ä¢ Staff Professionalism: ${response.staff_professionalism}/5
‚Ä¢ Waiting Time: ${response.waiting_time}/5
‚Ä¢ Feeling Heard: ${response.feeling_heard}/5

SERVICE-SPECIFIC RATINGS:
‚Ä¢ Reception/Front Desk: ${response.reception_rating ? response.reception_rating + '/5' : 'Not rated'}
‚Ä¢ Doctor Consultation: ${response.doctor_rating ? response.doctor_rating + '/5' : 'Not rated'}  
‚Ä¢ Nursing Services: ${response.nursing_rating ? response.nursing_rating + '/5' : 'Not rated'}

STAFF INTERACTION:
‚Ä¢ Communication Clarity: ${response.communication_clarity ? response.communication_clarity + '/5' : 'Not rated'}
‚Ä¢ Staff Courtesy: ${response.staff_courtesy ? response.staff_courtesy + '/5' : 'Not rated'}

ISSUES REPORTED:
‚Ä¢ Had Issues: ${response.had_issues || 'Not specified'}
${response.issue_description ? '‚Ä¢ Issue Details: ' + response.issue_description : ''}

FOLLOW-UP NEEDS:
${response.followup_needs_array && response.followup_needs_array.length > 0 ? '‚Ä¢ Requested: ' + response.followup_needs_array.join(', ') : '‚Ä¢ No specific follow-up requested'}
${response.followup_details ? '‚Ä¢ Follow-up Details: ' + response.followup_details : ''}

GENERAL COMMENTS:
${response.comments || 'No additional comments provided'}

CONTACT PREFERENCES:
${response.contact_preference_array && response.contact_preference_array.length > 0 ? '‚Ä¢ Preferred contact: ' + response.contact_preference_array.join(', ') : '‚Ä¢ No contact preferences specified'}

SUBMISSION DETAILS:
‚Ä¢ Submitted: ${response.submittedAt}
‚Ä¢ Response ID: ${response.id}

${response.overall_satisfaction <= 2 || response.had_issues === 'yes' ? '‚ö†Ô∏è PRIORITY: Low satisfaction or issues reported - Follow up within 24 hours!' : ''}
                `
            };
            
            console.log('Email notification sent:', emailData);
            
            // Store email notifications for admin dashboard
            let emailLog = JSON.parse(localStorage.getItem('emailNotifications') || '[]');
            emailLog.push({
                ...emailData,
                sentAt: new Date().toLocaleString(),
                responseId: response.id
            });
            localStorage.setItem('emailNotifications', JSON.stringify(emailLog));
        }

        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data
            const formData = new FormData(this);
            const responseData = Object.fromEntries(formData);
            
            // Handle checkbox arrays for follow-up needs and contact preferences
            const followupNeeds = formData.getAll('followup_needs');
            const contactPreferences = formData.getAll('contact_preference');
            
            responseData.followup_needs_array = followupNeeds;
            responseData.contact_preference_array = contactPreferences;
            
            // Save the response
            const savedResponse = saveSurveyResponse(responseData);
            
            // Hide the form
            this.style.display = 'none';
            
            // Show thank you message
            document.getElementById('thankYou').classList.add('show');
            
            // Scroll to top to show thank you message
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            console.log('Survey response saved:', savedResponse);
        });

        // Show/hide issue details based on selection
        document.querySelectorAll('input[name="had_issues"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const issueDetails = document.getElementById('issueDetails');
                if (this.value === 'yes') {
                    issueDetails.style.display = 'block';
                    document.getElementById('issueDescription').required = true;
                } else {
                    issueDetails.style.display = 'none';
                    document.getElementById('issueDescription').required = false;
                    document.getElementById('issueDescription').value = '';
                }
            });
        });

        // Handle "no follow-up" checkbox to uncheck others
        document.querySelector('input[name="followup_needs"][value="no_followup"]').addEventListener('change', function() {
            if (this.checked) {
                document.querySelectorAll('input[name="followup_needs"]:not([value="no_followup"])').forEach(cb => {
                    cb.checked = false;
                });
            }
        });

        // Handle other follow-up checkboxes to uncheck "no follow-up"
        document.querySelectorAll('input[name="followup_needs"]:not([value="no_followup"])').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    document.querySelector('input[name="followup_needs"][value="no_followup"]').checked = false;
                }
            });
        });

        // Handle "no contact" checkbox to uncheck others
        document.querySelector('input[name="contact_preference"][value="no_contact"]').addEventListener('change', function() {
            if (this.checked) {
                document.querySelectorAll('input[name="contact_preference"]:not([value="no_contact"])').forEach(cb => {
                    cb.checked = false;
                });
            }
        });

        // Handle other contact checkboxes to uncheck "no contact"
        document.querySelectorAll('input[name="contact_preference"]:not([value="no_contact"])').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    document.querySelector('input[name="contact_preference"][value="no_contact"]').checked = false;
                }
            });
        });

        // Add visual feedback when hovering over rating options
        document.querySelectorAll('.rating-option').forEach(option => {
            option.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            option.addEventListener('mouseleave', function() {
                if (!this.querySelector('input').checked) {
                    this.style.transform = 'translateY(0)';
                }
            });
        });
    </script>
</body>
</html>
